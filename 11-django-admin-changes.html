
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 11: Modifications in Django admin Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="12-model-modifications.html" />
    
    
    <link rel="prev" href="10-django-admin.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="oo-introduction.md">
            
                <span>
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-installing.html">
            
                <a href="01-installing.html">
            
                    
                    Chapter 01: Installing Django
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="02-github.html">
            
                <a href="02-github.html">
            
                    
                    Chapter 2: A basic overview of Github
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="03-views.html">
            
                <a href="03-views.html">
            
                    
                    Chapter 3: A Django view
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="04-routes.html">
            
                <a href="04-routes.html">
            
                    
                    Chapter 4: Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="05-base-template.html">
            
                <a href="05-base-template.html">
            
                    
                    Chapter 5: Base template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="06-new-webpage.html">
            
                <a href="06-new-webpage.html">
            
                    
                    Chapter 6: Webpages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="07-rendering-dash-apps.html">
            
                <a href="07-rendering-dash-apps.html">
            
                    
                    Chapter 7: Dash in Django
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="08-another-app.html">
            
                <a href="08-another-app.html">
            
                    
                    Chapter 8: Another Django app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="09-creating-models.html">
            
                <a href="09-creating-models.html">
            
                    
                    Chapter 09: A model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="10-django-admin.html">
            
                <a href="10-django-admin.html">
            
                    
                    Chapter 10: Django admin
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.13" data-path="11-django-admin-changes.html">
            
                <a href="11-django-admin-changes.html">
            
                    
                    Chapter 11: Modifications in Django admin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="12-model-modifications.html">
            
                <a href="12-model-modifications.html">
            
                    
                    Chapter 12: Foreign keys
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="13-adding-images.html">
            
                <a href="13-adding-images.html">
            
                    
                    Chapter 13: Images in Django
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="14-adding-users.html">
            
                <a href="14-adding-users.html">
            
                    
                    Chapter 14: Adding users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="15-rendering-on-render.html">
            
                <a href="15-rendering-on-render.html">
            
                    
                    Chapter 15: The Render server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="16-creating-geodjango-project.html">
            
                <a href="16-creating-geodjango-project.html">
            
                    
                    Chapter 16: Geodjango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="17-geodjango-essentials.html">
            
                <a href="17-geodjango-essentials.html">
            
                    
                    Chapter 17: Configuring Geodjango
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="18-geodjango-model.html">
            
                <a href="18-geodjango-model.html">
            
                    
                    Chapter 18: Geodjango model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="19-geodjango-homepage.html">
            
                <a href="19-geodjango-homepage.html">
            
                    
                    Chapter 19: A Geodjango template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="20-geodjango-leaflet.html">
            
                <a href="20-geodjango-leaflet.html">
            
                    
                    Chapter 20: Django leaflet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="21-render-geodjango.html">
            
                <a href="21-render-geodjango.html">
            
                    
                    Chapter 21: Render a Geodjango app
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Chapter 11: Modifications in Django admin</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="chapter-11-modifications-in-django-admin">Chapter 11: Modifications in Django admin</h1>
<h2 id="missing-date-and-time-fields">Missing date and time fields</h2>
<p>From the last chapter, we had a functioning Django admin site that shows our model&apos;s fields except for <code>survey_date</code> and <code>survey_time</code>. Apparently, if one uses the <code>auto_add_new</code> parameter in their <code>DateTime</code> and <code>TimeField</code> fields, or even <code>DateTimeField</code> for that matter, the date and time fields will automatically be added when the object is created for the first time. They will also be uneditable. However, they will not appear in the Django Admin.</p>
<p>What shall we do yet the date and time is important to know when the survey was being conducted?</p>
<h2 id="date-and-time-fields-in-django-admin">Date and time fields in Django Admin</h2>
<p>There is a work around to the above problem. We will make the date and time fields editable but they will by default be set at the current date and time by default. </p>
<p>In your <code>australia/models.py</code>, change the <code>survey_date</code> and <code>survey_time</code> fields to match as below:</p>
<pre><code>from datetime import date
from django.utils import timezone

--snip-- 
survey_date = models.DateField(default=date.today)

survey_time = models.TimeField(default=timezone.localtime)

--snip--
</code></pre><p>This sets the <code>survey_date</code> to use the current date and for the <code>survey_time</code> to use the current time at our local timezone. </p>
<p>Let&apos;s define our timezone in <code>settings.py</code>.</p>
<pre><code>TIME_ZONE = &apos;Africa/Nairobi&apos;
</code></pre><p>Feel free to use your local timezone as contained in this list of <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank">timezones</a>.</p>
<h2 id="modify-the-adminpy">Modify the <code>admin.py</code></h2>
<p>In our first instance of creating models, we simply used the <code>pass</code> keyword to capture all fields defined by our <code>QuestionnaireAdmin</code> class.</p>
<pre><code>class QuestionnaireAdmin(admin.ModelAdmin):
    pass
</code></pre><p>How about if you want to arrange the order in which your model fields appear in Django Admin? </p>
<p>You can do so by creating a list under your <code>ModelAdmin</code>, in this case <code>QuestionnaireAdmin</code> like below.</p>
<pre><code>class QuestionnaireAdmin(admin.ModelAdmin):
    # pass 
    fields = (&quot;survey_date&quot;, &quot;survey_time&quot;, &quot;territory&quot;, &quot;area&quot;,)
</code></pre><p>This will display the fields in our DjangoAdmin as <code>survey_date</code>, <code>survey_time</code>, <code>territory</code>, and <code>area</code> in that order.</p>
<h2 id="migrate-the-model">Migrate the model</h2>
<p>Now that we&apos;ve made changes to our model, it&apos;s time we tell Django to make updates to our database schema.</p>
<p>First run <code>python3 manage.py makemigrations australia</code> to tell Django to make records of the updates but limited to the <code>australia</code> app only.</p>
<pre><code>Migrations for &apos;australia&apos;:
  australia/migrations/0007_alter_questionnaire_survey_time.py
    ~ Alter field survey_time on questionnaire
</code></pre><p>Thereafter, run <code>python3 manage.py migrate australia</code> to tell Django to apply the modifications in our database schema but restricted to those of the <code>australia</code> app only.</p>
<pre><code>Operations to perform:
  Apply all migrations: australia
Running migrations:
  Applying australia.0007_alter_questionnaire_survey_time... OK
</code></pre><p>Once done, run <code>python3 manage.py runserver</code>. Go to <code>http://127.0.0.1:8000/admin</code>. </p>
<p>Go to the <strong>Questionnaire</strong> button under your <strong>Australia</strong> application name. Click on any previous response, say <em>Questionnaire object (1)</em>. </p>
<p><img src="images/questionnaire_object_1.PNG" alt="Questionnaire object 1"></p>
<p>Click on it. You will see the date and time at which the question was set. This is because according to the <a href="https://docs.djangoproject.com/en/5.2/ref/models/fields/#datefield" target="_blank">Django documentation</a>, the <code>auto_add_now</code> parameter sets the date and time to when the object was first created.</p>
<p><img src="images/question_time.PNG" alt="Time question was set"></p>
<p>If you add a question, you will notice that the <code>survey_date</code> as <em>Survey date</em> and <code>survey_time</code> as <em>Survey time</em> appear and are by default set to your local time. But notice they are also editable as well. The time is set to the <code>TIME_ZONE</code> variable you set in the <code>settings.py</code> file. </p>
<p><img src="images/add_question.PNG" alt="Add question"></p>
<p>If you hit <strong>SAVE</strong> the question will be saved with the date and time you&apos;ve specified.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="10-django-admin.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 10: Django admin">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="12-model-modifications.html" class="navigation navigation-next " aria-label="Next page: Chapter 12: Foreign keys">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 11: Modifications in Django admin","level":"1.13","depth":1,"next":{"title":"Chapter 12: Foreign keys","level":"1.14","depth":1,"path":"12-model-modifications.md","ref":"12-model-modifications.md","articles":[]},"previous":{"title":"Chapter 10: Django admin","level":"1.12","depth":1,"path":"10-django-admin.md","ref":"10-django-admin.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"}},"file":{"path":"11-django-admin-changes.md","mtime":"2025-06-19T18:02:24.738Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2025-07-05T18:13:42.006Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

